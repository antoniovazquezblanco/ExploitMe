
UNAME:=$(shell uname)
ifneq (,$(findstring Linux, $(UNAME)))
	# We are on linux...
	BINFILE:=exploitme-linux
	CFLAGS:=-fno-stack-protector
endif
ifneq (,$(findstring Darwin, $(UNAME)))
	# This is Mac OS....
	BINFILE:=exploitme-macos
	CFLAGS:=-fno-stack-protector
endif
ifneq (,$(findstring MINGW, $(UNAME)))
	# Running on Windows...
	BINFILE:=exploitme-win.exe
endif

all:
	$(CC) -o bin/$(BINFILE) src/main.c $(CFLAGS)

debug:
	$(CC) -o bin/$(BINFILE) src/main.c -g $(CFLAGS)

exploit: all
	sol/exploit bin/$(BINFILE)

clean:
	rm -rf bin/$(BINFILE)*
